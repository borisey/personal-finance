<div class="row" th:fragment="transactions" xmlns:th="http://www.w3.org/1999/xhtml">
    <h3 style="text-align: center">Все транзакции</h3>

    <div class="table-responsive small">
        <table class="table table-striped table-sm">
            <thead>
            <tr>
                <th>Тип</th>
                <th>Сумма</th>
                <th>Категория</th>
                <th>Счет</th>
                <th>Дата</th>
                <th>Действия</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="userTransaction : ${allUserTransactions}">
                <td th:text="${userTransaction.type.title}"/>
                <td th:text="${#numbers.formatDecimal(userTransaction.amount, 1, 2)}"/>
                <td th:text="${userTransaction.category.title}"/>
                <td th:text="${userTransaction.account.title}"/>
                <td th:text="${#temporals.format(userTransaction.date, 'dd.MM.yyyy')}" />

                <td th:switch="${userTransaction.type.id}">
                    <!-- todo сделать константы -->
                    <a th:case="1" th:href="'/income/' + ${userTransaction.id} + '/edit'"><i class="far fa-edit"></i></a>
                    <a th:case="2" th:href="'/expense/' + ${userTransaction.id} + '/edit'"><i class="far fa-edit"></i></a>
                    <a th:href="'/balance/' + ${userTransaction.id} + '/delete'"><i class="far fa-trash-alt"></i></a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="col">
        <h2 style="text-align: center">
            Доходы
        </h2>

        <h3 style="text-align: center">Добавить доход</h3>
        <form action="/balance/add-income" method="post">
            <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>

            <select th:required="required" class="form-control" id="addIncomeCategoryId" name="categoryId">
                <option value="">--Выберите категорию дохода--</option>
                <option th:each="userIncomeCategory : ${allUserIncomeCategories}" th:value="${userIncomeCategory.id}" th:text="${userIncomeCategory.title}"></option>
            </select><br>

            <select th:required="required" class="form-control" id="addIncomeAccountId" name="accountId">
                <option value="">--Выберите счет поступления--</option>
                <option th:each="userAccount : ${allUserAccounts}" th:value="${userAccount.id}" th:text="${userAccount.title}"></option>
            </select><br>

            <input th:required="required" type="date" name="date" placeholder="Выберите дату поступления" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" id="dateIncome" class="form-control"/><br>

            <input th:required="required" type="number" name="amount" min="0.01" step="0.01" placeholder="Введите сумму поступления" class="form-control"><br>

            <div style="text-align: center">
                <button type="submit" class="btn btn-success">Добавить доход</button>
            </div>
        </form>

    </div>

    <div class="col">
        <h2 style="text-align: center">
            Расходы
        </h2>

        <h3 style="text-align: center">Добавить расход</h3>
        <form action="/balance/add-expense" method="post">
            <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>

            <select th:required="required" class="form-control" id="addExpenseCategoryId" name="categoryId">
                <option value="">--Выберите категорию расхода--</option>
                <option th:each="userExpenseCategory : ${allUserExpensesCategories}" th:value="${userExpenseCategory.id}" th:text="${userExpenseCategory.title}"></option>
            </select><br>

            <select th:required="required" class="form-control" id="addExpenseAccountId" name="accountId">
                <option value="">--Выберите счет списания--</option>
                <option th:each="userAccount : ${allUserAccounts}" th:value="${userAccount.id}" th:text="${userAccount.title}"></option>
            </select><br>

            <input th:required="required" type="date" name="date" placeholder="Выберите дату списания" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" id="dateExpense" class="form-control"/><br>

            <input th:required="required" type="number" name="amount" min="0.01" step="0.01" placeholder="Введите сумму списания" class="form-control"><br>

            <div style="text-align: center">
                <button type="submit" class="btn btn-success">Добавить расход</button>
            </div>
        </form>
    </div>
</div>